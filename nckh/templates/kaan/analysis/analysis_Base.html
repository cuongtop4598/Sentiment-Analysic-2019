<html lang="en">

{% load static %}

<head>

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">

  <title>Analysis</title>

  <!-- Custom fonts for this template-->
  <link href="{% static 'kaan/analysis_Static/vendor/fontawesome-free/css/all.min.css' %}" rel="stylesheet" type="text/css">

  <!-- Page level plugin CSS-->
  <link href="{% static 'kaan/analysis_Static/vendor/datatables/dataTables.bootstrap4.css' %}" rel="stylesheet">

  <!-- Custom styles for this template-->
  <link href="{% static 'kaan/analysis_Static/css/sb-admin.css' %}" rel="stylesheet">
  {% comment %} <link rel="stylesheet" href="path/to/font-awesome/css/font-awesome.min.css"> {% endcomment %}
  <script src="https://kit.fontawesome.com/755fe09df9.js" crossorigin="anonymous"></script>
  <link href="{% static 'kaan/analysis.css' %}" rel="stylesheet">
</head>
<style>
p.price{
		font-weight: 500;
	}
	.product p{
		color: muted;
		font-size: 14px;
		margin-bottom: 0px;
	}
	.product p i{
		color: #ffa500;
	}
	.product a{
		text-decoration: none;
		color: #000;
	}
	.product a:hover{
		color: #fb4f4f;
	}
	
	.product p.producer{
		color: #000;
		margin-bottom: 20px;
	}
	.product p.producer span{
		color: #1051e4;
		font-size: 16px;
	}
	.wrapper-inner:hover,.img-product:hover{
	box-shadow: 0 0 20px rgba(0,0,0,0.1);
	}
	p.shop span{
		color: #ff0c0c;
	}
.info-pro a:hover{
  background: #a20d0d!important;
}
#info-product a:hover{
  text-decoration:none!important;
}
li.nav-item:hover{
  color:#fff!important;
  background-color: #ea9c9c;
}
.dropdown-item:hover, .dropdown-item:focus {
  color: #16181b;
  text-decoration: none;
  background-color: #45a0fb;
  cursor: pointer;
}
</style>
<body id="page-top">

  <nav class="navbar navbar-expand navbar-dark bg-dark static-top">

    <a class="navbar-brand mr-1" href="{% url 'kaan:Analysis' %}">Home</a>

    <button class="btn btn-link btn-sm text-white order-1 order-sm-0" id="sidebarToggle" href="#">
      <i class="fas fa-bars"></i>
    </button>

    <!-- Navbar Search -->
    <form class="d-none d-md-inline-block form-inline ml-auto mr-0 mr-md-3 my-2 my-md-0">
      <div class="input-group">
        <input type="text" class="form-control" placeholder="Search for..." aria-label="Search" aria-describedby="basic-addon2">
        <div class="input-group-append">
          <button class="btn btn-primary" type="button">
            <i class="fas fa-search"></i>
          </button>
        </div>
      </div>
    </form>

    <!-- Navbar -->
    <ul class="navbar-nav ml-auto ml-md-0">
      <li class="nav-item dropdown no-arrow mx-1">
        <a class="nav-link dropdown-toggle" href="#" id="alertsDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          <i class="fas fa-bell fa-fw"></i>
          <span class="badge badge-danger">9+</span>
        </a>
        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="alertsDropdown">
          <a class="dropdown-item" href="#">Action</a>
          <a class="dropdown-item" href="#">Another action</a>
          <div class="dropdown-divider"></div>
          <a class="dropdown-item" href="#">Something else here</a>
        </div>
      </li>
      <li class="nav-item dropdown no-arrow mx-1">
        <a class="nav-link dropdown-toggle" href="#" id="messagesDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          <i class="fas fa-envelope fa-fw"></i>
          <span class="badge badge-danger">7</span>
        </a>
        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="messagesDropdown">
          <a class="dropdown-item" href="#">Action</a>
          <a class="dropdown-item" href="#">Another action</a>
          <div class="dropdown-divider"></div>
          <a class="dropdown-item" href="#">Something else here</a>
        </div>
      </li>
      <li class="nav-item dropdown no-arrow">
        <a class="nav-link dropdown-toggle" href="#" id="userDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          <i class="fas fa-user-circle fa-fw"></i>
        </a>
        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="userDropdown">
          <a class="dropdown-item" href="#">Settings</a>
          <a class="dropdown-item" href="#">Activity Log</a>
          <div class="dropdown-divider"></div>
          <a class="dropdown-item" href="#" data-toggle="modal" data-target="#logoutModal">Logout</a>
        </div>
      </li>
    </ul>

  </nav>

  <div id="wrapper">

    <!-- Sidebar -->
    <ul class="sidebar navbar-nav">
      <li class="nav-item active">
        <a class="nav-link" href="#">
          <i class="fas fa-fw fa-tachometer-alt"></i>
          <span>Dashboard</span>
        </a>
      </li>
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="pagesDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          <i class="fa fa-bar-chart" aria-hidden="true"></i>
          <span>Chọn Khoảng Giá</span>
        </a>
        <div class="dropdown-menu" aria-labelledby="pagesDropdown">
          {% comment %} <h6 class="dropdown-header">Login Screens:</h6> {% endcomment %}
          {% comment %} <a class="dropdown-item" href="#">Login</a> {% endcomment %}
          <p class="dropdown-item" onclick="display_chart(1);">
            <span>Dưới 3 Triệu</span>
          </p>
          <p class="dropdown-item" onclick="display_chart(2);">
            <span>Từ 3 - 5 Triệu</span>
          </p>
          <p class="dropdown-item" onclick="display_chart(3);">
            <span>Từ 5 - 7 Triệu</span>
          </p>
          <p class="dropdown-item" onclick="display_chart(4);">
            <span>Từ 7 - 10 Triệu</span>
          </p>
          <p class="dropdown-item" onclick="display_chart(5);">
            <span>Từ 10 - 12 Triệu</span>
          </p>
          <p class="dropdown-item" onclick="display_chart(6);">
            <span>Từ 12 - 15 Triệu</span>
          </p>
          <p class="dropdown-item" onclick="display_chart(7);">
            <span>Từ 15 - 20 Triệu</span>
          </p>
          <p class="dropdown-item" onclick="display_chart(8);">
            <span>Trên 20 Triệu</span>
          </p>
          <div class="dropdown-divider"></div>
          
          {% comment %} <h6 class="dropdown-header">Other Pages:</h6>
          <a class="dropdown-item" href="404.html">404 Page</a>
          <a class="dropdown-item" href="blank.html">Blank Page</a> {% endcomment %}
        </div>
      </li>
      <li class="nav-item active">
        <a class="nav-link" href="{% url 'kaan:Predict' %}">
          <i class="fa fa-search-plus" aria-hidden="true"></i>
          <span>Predict</span>
        </a>
      </li>
      <li class="nav-item active">
        <a class="nav-link" href="{% url 'kaan:Update' %}">
          <i class="fa fa-search-plus" aria-hidden="true"></i>
          <span>Update</span>
        </a>
      </li>
      <li class="nav-item active">
        <a class="nav-link" href="{% url 'kaan:About' %}">
          <i class="fa fa-address-book" aria-hidden="true"></i>
          <span>About</span>
        </a>
      </li>
    </ul>

    <!-- /.content-wrapper -->
    <!-- start block -->
    <script src="{% static 'kaan/Chart.js' %}"></script>
    <div class ="container mt-4">
      <div class='row'>
        <div class="col-md-9">
          <div class="Chart1" id="divchart1">
            <canvas id="Chart1" style="height: 400px; width: 100%;"></canvas>
        </div>
        <div class="container" id="info-product">
          
        </div>
        <div class="Chart2" id="divchart2">
            <canvas id="Chart2" style="height: 400px; width: 100%;"></canvas>
        </div>
        <div>
          <div class="container" id="disp">
            <div class="row" id="displayProducts">
              
            </div>
          </div>
          <div class="container" id="disc">
            <div class="row" id="displayCMT" style="display:none;">
              <div class="seclect-table col-md-12">
                <div class="form form-group">
                  <label for="evaluate">Chọn đánh giá</label>
                  <select name="evaluate" id="evaluate" class="form-control">
                    <option value="0">Positive</option>
                    <option value="1">Normal</option>
                    <option value="2">Negative</option>
                  </select><br>
                  <button name="btn-select" class="btn btn-primary" onclick="drawTable();">Show</button> 
                  <!-- Có thể bỏ button  -->
                </div>
                <div class="display-table mt-4">
                  <table class="table  table-bordered table-striped" style="display:none;" id="table">
                    <thead class="thead-dark" id="tableHead">
                      
                    </thead>
                    <tbody id="tableBody">
                    </tbody>
                  </table>
                </div>
				      </div>
            </div>
          </div>
        </div>  
        </div>

        <div class="col-md-3">
          <h3>Danh Mục</h3>
        <div id="catagories">
        </div>
        </div>
      </div>
      
      {% comment %} <div class="container-right" style="width:20%;padding-left: 50px;padding-top:20px;float:right;">
        
      </div> {% endcomment %}
      
    </div> 
    <!-- script -->
    <script>
        //Bien toan cuc
        var flag = 0;
        const Amount_dataset = {{ brands_amount | safe }};
        const Amount_Sold_dataset = {{ total_cmts | safe }};
        const xlabels = {{ brands_label | safe }};
        const brands_len = Amount_Sold_dataset.length;
        function display_chart(tp)
        {
          flag = tp;
          //remove chart1
          var infoP = document.getElementById("info-product");
          infoP.innerHTML = "";
          var tble = document.getElementById("displayCMT");
          tble.style = "display:none;";
          table = document.getElementById("table"); 
          table.style = "display:none";
          var re = document.getElementById("Chart1");
          if(re)
            re.parentNode.removeChild(re);
          //remove chart2
          var re2 = document.getElementById("Chart2");
          if(re2){
            re2.parentNode.removeChild(re2);
          }
          //remove displayProducts
          var dispro = document.getElementById("displayProducts");
          if( dispro ){
            dispro.parentNode.removeChild(dispro);
          }
          var chart = document.createElement("canvas");
          chart.setAttribute('id','Chart1');
          var pNode = document.getElementById("divchart1");
          pNode.appendChild(chart);
          var slsp = [];
          var total_cmd = [];
          var avg = []
          var phonesID = []
          {% for brand in Brands %}
            var tmp = 0;
            var ttcmd = 0;
            phonesID.push("{{brand.id}}")
            {% for phone in Phones %}
              if( tp == 1){
              {% if phone.brand_id == brand.id and phone.price < 3000000 %}
                tmp ++;
                ttcmd += {{phone.sold}};
              {% endif %}
              }
              else if( tp == 2)
              {
                {% if phone.brand_id == brand.id and phone.price >= 3000000 and phone.price < 5000000 %}
                tmp ++;
                ttcmd += {{phone.sold}};
                {% endif %}
              }
              else if( tp == 3)
              {
                {% if phone.brand_id == brand.id and phone.price >= 5000000 and phone.price < 7000000 %}
                tmp ++;
                ttcmd += {{phone.sold}};
                {% endif %}
              }
              else if( tp == 4)
              {
                {% if phone.brand_id == brand.id and phone.price >= 7000000 and phone.price < 10000000 %}
                tmp ++;
                ttcmd += {{phone.sold}};
                {% endif %}
              }
              else if( tp == 5)
              {
                {% if phone.brand_id == brand.id and phone.price >= 10000000 and phone.price < 12000000 %}
                tmp ++;
                ttcmd += {{phone.sold}};
                {% endif %}
              }
              else if( tp == 6)
              {
                {% if phone.brand_id == brand.id and phone.price >= 12000000 and phone.price < 15000000 %}
                tmp ++;
                ttcmd += {{phone.sold}};
                {% endif %}
              }
              else if( tp == 7)
              {
                {% if phone.brand_id == brand.id and phone.price >= 15000000 and phone.price < 20000000 %}
                tmp ++;
                ttcmd += {{phone.sold}};
                {% endif %}
              }
              else if( tp == 8)
              {
                {% if phone.brand_id == brand.id and phone.price >= 20000000 %}
                tmp ++;
                ttcmd += {{phone.sold}};
                {% endif %}
              }
            {% endfor %}
            slsp.push(tmp);
            total_cmd.push(ttcmd);
            if( tmp == 0 )
              avg.push(Math.floor(ttcmd / 1));
            else avg.push(Math.floor(ttcmd / tmp));
          {% endfor %}
          var colors = [];
          var SP_percent = [];
          var ttsp = 0;
          for( var i = 0 ; i < brands_len ; i++)
          {
            ttsp += slsp[i];
          }
          for( var i = 0 ; i < brands_len; i++)
          {
            SP_percent.push(slsp[i] / ttsp * 100);
          }
          for(var i = 0 ; i < brands_len ; i++)
          {
              var x = Math.floor(Math.random() * 255 + 1);
              var y = Math.floor(Math.random() * 255 + 1);
              var z = Math.floor(Math.random() * 255 + 1);
              var t = Math.floor(Math.random() * 100 + 1) / 10;
              var tmp = "rgba(" + x + ','  + y + ',' + z +  "," +  t  + ")";
              colors.push(tmp);
          }
          var ctx = document.getElementById("Chart1");
          var myChart = new Chart(ctx, {
              type: 'bar',
              data: {
                  labels: xlabels,
                  datasets: [{
                      label: "Số Lượng Đánh Giá Trung Bình",
                      data: avg,
                      backgroundColor: colors,
                      borderColor: colors,
                      borderWidth: 1
                  }]
              },
              options: {
                  scales: {
                      yAxes: [{
                          ticks: {
                              beginAtZero: true
                          }
                      }]
                  }
              }
          });
          //draw chart2 - chart pie
          var chart2 = document.createElement("canvas");
          chart2.setAttribute('id','Chart2');
          var pNode2 = document.getElementById("divchart2");
          pNode2.appendChild(chart2);
          var config = {
          type: 'pie',
          data: {
            datasets: [{
              label: "# Votes",
              data: SP_percent,
              backgroundColor: colors,
            }],
            labels: xlabels
          },
          options: {
            responsive: true
          }
          };
          var ctx2 = document.getElementById("Chart2");
          var myChart2 = new Chart(ctx2,config);
          var list_radio = document.getElementById("catagories");
          list_radio.innerHTML = "";
          for(var i = 0 ; i < brands_len ; i++)
          {
            list_radio.innerHTML += "<input type=\"radio\" value=\""+ slsp[i] +"\" name=\"rbtn\" id=\"" + phonesID[i] +"\" onclick=\"drawChart2();\"> "+ xlabels[i] + "(" + slsp[i] +")<br>";
          }
        }
        function check()
        {
          var listR = document.getElementsByName("rbtn");
          var l = listR.length;
          for( var i = 0 ; i < l ; i++)
            if( listR[i].checked)
            {
              var text = listR[i].value;
              var id = listR[i].id;
              return {"type" : i,"text" :text,"id":id};
            }
        }
        function drawChart2()
        {
          var infoP = document.getElementById("info-product");
          infoP.innerHTML = "";
          isdraw = check();
          if(isdraw['text'] != 0 )
          {
            var labels = [];
            var labelsSP = [];
            var slcmd = [];
            var itemsID = [];
            {% for brand in Brands %}
              if(isdraw['id'] == "{{ brand.id }}"){
                {% for phone in Phones %}
                  if(flag == 1){
                  {% if phone.brand_id == brand.id and phone.price < 3000000 %}
                    labels.push("{{phone.name}}");
                    slcmd.push("{{phone.sold}}");
                    itemsID.push("{{phone.id}}");
                  {% endif %}
                  }
                  else if( flag == 2)
                  {
                    {% if phone.brand_id == brand.id and phone.price >= 3000000 and phone.price < 5000000 %}
                      labels.push("{{phone.name}}");
                      slcmd.push("{{phone.sold}}");
                      itemsID.push("{{phone.id}}");
                    {% endif %}
                  }
                  else if( flag == 3)
                  {
                    {% if phone.brand_id == brand.id and phone.price >= 5000000 and phone.price < 7000000 %}
                      labels.push("{{phone.name}}");
                      slcmd.push("{{phone.sold}}");
                      itemsID.push("{{phone.id}}");
                    {% endif %}
                  }
                  else if( flag == 4)
                  {
                    {% if phone.brand_id == brand.id and phone.price >= 7000000 and phone.price < 10000000 %}
                      labels.push("{{phone.name}}");
                      slcmd.push("{{phone.sold}}");
                      itemsID.push("{{phone.id}}");
                    {% endif %}
                  }
                  else if( flag == 5)
                  {
                    {% if phone.brand_id == brand.id and phone.price >= 10000000 and phone.price < 12000000 %}
                      labels.push("{{phone.name}}");
                      slcmd.push("{{phone.sold}}");
                      itemsID.push("{{phone.id}}");
                    {% endif %}
                  }
                  else if( flag == 6)
                  {
                    {% if phone.brand_id == brand.id and phone.price >= 12000000 and phone.price < 15000000 %}
                      labels.push("{{phone.name}}");
                      slcmd.push("{{phone.sold}}");
                      itemsID.push("{{phone.id}}");
                    {% endif %}
                  }
                  else if( flag == 7)
                  {
                    {% if phone.brand_id == brand.id and phone.price >= 15000000 and phone.price < 20000000 %}
                      labels.push("{{phone.name}}");
                      slcmd.push("{{phone.sold}}");
                      itemsID.push("{{phone.id}}");
                    {% endif %}
                  }
                  else if( flag == 8)
                  {
                    {% if phone.brand_id == brand.id and phone.price >= 20000000 %}
                      labels.push("{{phone.name}}");
                      slcmd.push("{{phone.sold}}");
                      itemsID.push("{{phone.id}}");
                    {% endif %}
                  }
                {% endfor %}
              }
            {% endfor %}
            var parentNode = document.getElementById("divchart1");
            //remove chart1
            var re = document.getElementById("Chart1")
            if(re)
              re.parentNode.removeChild(re); 
            //remove chart2
            var re2 = document.getElementById("Chart2");
            if(re2){
            re2.parentNode.removeChild(re2);
            }
            var chart1 = document.createElement("canvas");
            chart1.setAttribute('id',"Chart1");
            parentNode.appendChild(chart1);
            var ctx = document.getElementById('Chart1');
            var colors = [];
            for(var i = 0 ; i < labels.length ; i++)
            {
                labelsSP.push("SP " + String(i));
                var x = Math.floor(Math.random() * 255 + 1);
                var y = Math.floor(Math.random() * 255 + 1);
                var z = Math.floor(Math.random() * 255 + 1);
                var t = Math.floor(Math.random() * 100 + 1) / 10;
                var tmp = "rgba(" + x + ','  + y + ',' + z +  "," +  t  + ")";
                colors.push(tmp);
            }
            var myChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labelsSP,
                    datasets: [{
                        label: "Số Lượng Đánh Giá",
                        data: slcmd,
                        backgroundColor: colors,
                        borderColor: colors,
                        borderWidth: 1
                    }]
                },
                options: {
                    scales: {
                        yAxes: [{
                            ticks: {
                                beginAtZero: true
                            }
                        }]
                    }
                }
            });
            var disp = document.getElementById('disp');
            var displayP = document.createElement("div");
            displayP.setAttribute("id","displayProducts");
            displayP.setAttribute("class","row");
            disp.appendChild(displayP);
            var displayBlock = document.getElementById("displayProducts");
            {% for phone in Phones %}
            if( isdraw['id'] == "{{phone.brand_id}}")
            {
              if( flag == 1){
              {% if phone.price < 3000000 %}
                displayBlock.innerHTML += "<div class=\"wrapper-inner col-md-4  col-6\">\
                              <div class=\"product mb-4\">\
                                <a href=\"{{phone.productURL}}\" target=\"_blank\" class=\"d-block\"><img src=\"{{phone.imageURL}}\"  alt=\"\" class=\"img-fluid\" title=\"\" ></a>\
                                <a class=\"pl-4 d-block\"  target=\"_blank\"  href=\"{{phone.productURL}}\">{{phone.name}}</a>\
                                <p class=\"pl-4\"><span>Rating : </span>{{phone.rating}} <i class=\"fa fa-star\" aria-hidden=\"true\"></i></p>\
                                <p class=\"price pl-4\">Giá : <span style=\"color:red;\">{{phone.price}} ₫</span></p>\
                                <p class=\"shop pl-4\">Cửa hàng bán: <span>Tiki Trading</span></p>\
                                <p class=\"producer pl-4\">Trang bán: <span>{{phone.typeOF}}</span></p>\
                              </div>\
                            </div>";
              {% endif %}
              }
              else if( flag == 2){
              {% if phone.price >= 3000000 and phone.price < 5000000 %}
                displayBlock.innerHTML += "<div class=\"wrapper-inner col-md-4  col-6\">\
                              <div class=\"product mb-4\">\
                                <a href=\"{{phone.productURL}}\" target=\"_blank\" class=\"d-block\"><img src=\"{{phone.imageURL}}\"  alt=\"\" class=\"img-fluid\" title=\"\" ></a>\
                                <a class=\"pl-4 d-block\"  target=\"_blank\"  href=\"{{phone.productURL}}\">{{phone.name}}</a>\
                                <p class=\"pl-4\"><span>Rating : </span>{{phone.rating}} <i class=\"fa fa-star\" aria-hidden=\"true\"></i></p>\
                                <p class=\"price pl-4\">Giá : <span style=\"color:red;\">{{phone.price}} ₫</span></p>\
                                <p class=\"shop pl-4\">Cửa hàng bán: <span>Tiki Trading</span></p>\
                                <p class=\"producer pl-4\">Trang bán: <span>{{phone.typeOF}}</span></p>\
                              </div>\
                            </div>";
              {% endif %}
              }
              else if(flag == 3){
              {% if phone.price >= 5000000 and phone.price < 7000000 %}
                displayBlock.innerHTML += "<div class=\"wrapper-inner col-md-4  col-6\">\
                              <div class=\"product mb-4\">\
                                <a href=\"{{phone.productURL}}\" target=\"_blank\" class=\"d-block\"><img src=\"{{phone.imageURL}}\"  alt=\"\" class=\"img-fluid\" title=\"\" ></a>\
                                <a class=\"pl-4 d-block\"  target=\"_blank\"  href=\"{{phone.productURL}}\">{{phone.name}}</a>\
                                <p class=\"pl-4\"><span>Rating : </span>{{phone.rating}} <i class=\"fa fa-star\" aria-hidden=\"true\"></i></p>\
                                <p class=\"price pl-4\">Giá : <span style=\"color:red;\">{{phone.price}} ₫</span></p>\
                                <p class=\"shop pl-4\">Cửa hàng bán: <span>Tiki Trading</span></p>\
                                <p class=\"producer pl-4\">Trang bán: <span>{{phone.typeOF}}</span></p>\
                              </div>\
                            </div>";
              {% endif %}
              }
              else if(flag == 4){
              {% if phone.price >= 7000000 and phone.price < 10000000 %}
                displayBlock.innerHTML += "<div class=\"wrapper-inner col-md-4  col-6\">\
                              <div class=\"product mb-4\">\
                                <a href=\"{{phone.productURL}}\" target=\"_blank\" class=\"d-block\"><img src=\"{{phone.imageURL}}\"  alt=\"\" class=\"img-fluid\" title=\"\" ></a>\
                                <a class=\"pl-4 d-block\"  target=\"_blank\"  href=\"{{phone.productURL}}\">{{phone.name}}</a>\
                                <p class=\"pl-4\"><span>Rating : </span>{{phone.rating}} <i class=\"fa fa-star\" aria-hidden=\"true\"></i></p>\
                                <p class=\"price pl-4\">Giá : <span style=\"color:red;\">{{phone.price}} ₫</span></p>\
                                <p class=\"shop pl-4\">Cửa hàng bán: <span>Tiki Trading</span></p>\
                                <p class=\"producer pl-4\">Trang bán: <span>{{phone.typeOF}}</span></p>\
                              </div>\
                            </div>";
              {% endif %}
              }
              else if(flag == 5){
              {% if phone.price >= 10000000 and phone.price < 12000000 %}
                displayBlock.innerHTML += "<div class=\"wrapper-inner col-md-4  col-6\">\
                              <div class=\"product mb-4\">\
                                <a href=\"{{phone.productURL}}\" target=\"_blank\" class=\"d-block\"><img src=\"{{phone.imageURL}}\"  alt=\"\" class=\"img-fluid\" title=\"\" ></a>\
                                <a class=\"pl-4 d-block\"  target=\"_blank\"  href=\"{{phone.productURL}}\">{{phone.name}}</a>\
                                <p class=\"pl-4\"><span>Rating : </span>{{phone.rating}} <i class=\"fa fa-star\" aria-hidden=\"true\"></i></p>\
                                <p class=\"price pl-4\">Giá : <span style=\"color:red;\">{{phone.price}} ₫</span></p>\
                                <p class=\"shop pl-4\">Cửa hàng bán: <span>Tiki Trading</span></p>\
                                <p class=\"producer pl-4\">Trang bán: <span>{{phone.typeOF}}</span></p>\
                              </div>\
                            </div>";
              {% endif %}
              }
              else if(flag == 6){
              {% if phone.price >= 12000000 and phone.price < 15000000 %}
                displayBlock.innerHTML += "<div class=\"wrapper-inner col-md-4  col-6\">\
                              <div class=\"product mb-4\">\
                                <a href=\"{{phone.productURL}}\" target=\"_blank\" class=\"d-block\"><img src=\"{{phone.imageURL}}\"  alt=\"\" class=\"img-fluid\" title=\"\" ></a>\
                                <a class=\"pl-4 d-block\"  target=\"_blank\"  href=\"{{phone.productURL}}\">{{phone.name}}</a>\
                                <p class=\"pl-4\"><span>Rating : </span>{{phone.rating}} <i class=\"fa fa-star\" aria-hidden=\"true\"></i></p>\
                                <p class=\"price pl-4\">Giá : <span style=\"color:red;\">{{phone.price}} ₫</span></p>\
                                <p class=\"shop pl-4\">Cửa hàng bán: <span>Tiki Trading</span></p>\
                                <p class=\"producer pl-4\">Trang bán: <span>{{phone.typeOF}}</span></p>\
                              </div>\
                            </div>";
              {% endif %}
              }
              else if(flag == 7){
              {% if phone.price >= 15000000 and phone.price < 20000000 %}
                displayBlock.innerHTML += "<div class=\"wrapper-inner col-md-4  col-6\">\
                              <div class=\"product mb-4\">\
                                <a href=\"{{phone.productURL}}\" target=\"_blank\" class=\"d-block\"><img src=\"{{phone.imageURL}}\"  alt=\"\" class=\"img-fluid\" title=\"\" ></a>\
                                <a class=\"pl-4 d-block\"  target=\"_blank\"  href=\"{{phone.productURL}}\">{{phone.name}}</a>\
                                <p class=\"pl-4\"><span>Rating : </span>{{phone.rating}} <i class=\"fa fa-star\" aria-hidden=\"true\"></i></p>\
                                <p class=\"price pl-4\">Giá : <span style=\"color:red;\">{{phone.price}} ₫</span></p>\
                                <p class=\"shop pl-4\">Cửa hàng bán: <span>Tiki Trading</span></p>\
                                <p class=\"producer pl-4\">Trang bán: <span>{{phone.typeOF}}</span></p>\
                              </div>\
                            </div>";
              {% endif %}
              }
              else if(flag == 8){
              {% if phone.price >= 20000000 %}
                displayBlock.innerHTML += "<div class=\"wrapper-inner col-md-4  col-6\">\
                              <div class=\"product mb-4\">\
                                <a href=\"{{phone.productURL}}\" target=\"_blank\" class=\"d-block\"><img src=\"{{phone.imageURL}}\"  alt=\"\" class=\"img-fluid\" title=\"\" ></a>\
                                <a class=\"pl-4 d-block\"  target=\"_blank\"  href=\"{{phone.productURL}}\">{{phone.name}}</a>\
                                <p class=\"pl-4\"><span>Rating : </span>{{phone.rating}} <i class=\"fa fa-star\" aria-hidden=\"true\"></i></p>\
                                <p class=\"price pl-4\">Giá : <span style=\"color:red;\">{{phone.price}} ₫</span></p>\
                                <p class=\"shop pl-4\">Cửa hàng bán: <span>Tiki Trading</span></p>\
                                <p class=\"producer pl-4\">Trang bán: <span>{{phone.typeOF}}</span></p>\
                              </div>\
                            </div>";
              {% endif %}
              }
            }
            {% endfor %}
            var radioProducts = document.getElementById('catagories');
            radioProducts.innerHTML = "";
            for(var i = 0 ; i < labels.length ; i ++)
            {
              radioProducts.innerHTML += "<input type=\"radio\" value=\"" + itemsID[i] +"\" name=\"rbtn2\" id=\"" + slcmd[i] +"\" onclick=\"drawChart3();\"> "+ labels[i] + " <br>";
            } 
          }
          else {
            var re = document.getElementById("Chart1");
            if(re)
              re.parentNode.removeChild(re);
            var re2 = document.getElementById("Chart2");
            if(re2)
              re2.parentNode.removeChild(re2); 
          }
        }
        function check2()
        {
          var listR = document.getElementsByName("rbtn2");
          var l = listR.length;
          for( var i = 0 ; i < l ; i++)
            if( listR[i].checked)
            {
              var itemid = listR[i].value;
              var slcmt = listR[i].id;
              return {"type" : i,"itemid" :itemid , "slcmt" : slcmt};
            }
        }
        function drawChart3()
        {
          
          var parentNode = document.getElementById("divchart2");
          var re1 = document.getElementById("Chart1");
          if(re1)
            re1.parentNode.removeChild(re1);
          var re = document.getElementById("Chart2");
          if( re )
          {
            re.parentNode.removeChild(re);
          }
          var displayProducts = document.getElementById('displayProducts');
          if( displayProducts )
            displayProducts.parentNode.removeChild(displayProducts);
          isdraw = check2();
          {% for phone in Phones %}
          if(isdraw["itemid"] == "{{phone.id}}")
          {
            var infoP = document.getElementById("info-product");
            infoP.innerHTML = "<div class=\"row\"><div class=\"col-md-6 img-product\">\
                              <a href=\"{{phone.productURL}}\" class=\"d-block\" target=\"_blank\"><img class=\"img-fluid\" src=\"{{phone.imageURL}}\"></a>\
                              </div><div class=\"info-pro col-md-6 pt-5 mt-4\"><span style=\"font-size:24px\">{{phone.name}}</span>\
                              <ul style=\"font-size:18px;\"><li>Rating : {{phone.rating}} <i style=\"color:#ffc107\" class=\"fa fa-star\" aria-hidden=\"true\"></i></li><li>Giá : <span style=\"color:red\">{{phone.price}} ₫</span></li>\
                              <li>Cửa hàng : <span style=\"color:blue\">Tiki Trading<span></li><li><span>SKU : </span>{{phone.sku}}</li></ul>\
                              <div><a class=\" px-5 py-3\" style=\"background:red;color:#fff\" href=\"{{phone.productURL}}\" target=\"_blank\">CHỌN MUA</a></div></div></div>";
          }
          {% endfor %}
          
          var pos = 0, nor = 0 , neg = 0;
          var chart2 = document.createElement("canvas");
          chart2.setAttribute("id","Chart2");
          parentNode.appendChild(chart2);
          var ctx = document.getElementById('Chart2');
          {% for cmt in Comments %}
            if( isdraw['itemid'] == "{{cmt.phone_id}}")
            {
              {% if cmt.stmAS == 1 %}
                pos++;
              {% elif cmt.stmAS == 0 %}
                nor ++;
              {% elif cmt.stmAS == -1 %}
                neg++;
              {% endif %}
            }
          {% endfor %}
          var haveCmt = pos + nor + neg;
          if(haveCmt > 0){
            var myChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ["Positive","Normal","Negative"],
                    datasets: [{
                        label: "Đánh Giá",
                        fill: false,
                        data: [pos,nor,neg],
                        backgroundColor: ['rgba(47, 212, 40,0.5)','rgba(134, 236, 255,0.5)','rgba(240, 84, 68,0.5)'],
                        borderWidth: 1
                    },]
                }
            });
          }
          var tble = document.getElementById("displayCMT");
          tble.style = "display:block;";
          var thead = document.getElementById("tableHead");
          thead.innerHTML = "";
          var tbody = document.getElementById("tableBody");
          tbody.innerHTML = "";
        }
        function drawTable()
        {
          isdraw = check2();
          
          if(isdraw["slcmt"] != 0){
            table = document.getElementById("table"); 
            table.style = "display:block";
            thead = document.getElementById("tableHead");
            thead.innerHTML = "<tr class=\"text-center\"><th>STT</th><th>Comment</th><th>Đánh giá</th></tr>";
            tbody = document.getElementById("tableBody");
            tbody.innerHTML = "";
            var selected = document.getElementById("evaluate").value;
            console.log(selected);
            var i = 1;
            {% for cmt in Comments %}
            if(selected == "0" ){
            if(isdraw['itemid'] == "{{ cmt.phone_id }}" && "{{cmt.stmAS}}" == "1"){
              tbody.innerHTML += "<tr>\
                                  <td class=\"text-center\">" + i +"</td>\
                                  <td>{{cmt.cment}}</td>\
                                  <td  class=\"text-center\">{{cmt.star}}</td>\
                                  </tr>";
              i++;
            }
            }
            if(selected == "1" ){
            if(isdraw['itemid'] == "{{ cmt.phone_id }}" && "{{cmt.stmAS}}" == "0"){
              tbody.innerHTML += "<tr>\
                                  <td class=\"text-center\">" + i +"</td>\
                                  <td>{{cmt.cment}}</td>\
                                  <td  class=\"text-center\">{{cmt.star}}</td>\
                                  </tr>";
              i++;
            }
            }
            if(selected == "2" ){
            if(isdraw['itemid'] == "{{ cmt.phone_id }}" && "{{cmt.stmAS}}" == "-1"){
              tbody.innerHTML += "<tr>\
                                  <td class=\"text-center\">" + i +"</td>\
                                  <td>{{cmt.cment}}</td>\
                                  <td  class=\"text-center\">{{cmt.star}}</td>\
                                  </tr>";
              i++;
            }
            } 
            {% endfor %}
          }
        }
    </script>

  </div>
  <!-- /#wrapper -->
  <!-- Display Chart -->

  <!-- Scroll to Top Button-->
  <a class="scroll-to-top rounded" href="#page-top">
    <i class="fas fa-angle-up"></i>
  </a>

  <!-- Logout Modal-->
  <div class="modal fade" id="logoutModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Ready to Leave?</h5>
          <button class="close" type="button" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">×</span>
          </button>
        </div>
        <div class="modal-body">Select "Logout" below if you are ready to end your current session.</div>
        <div class="modal-footer">
          <button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
          <a class="btn btn-primary" href="login.html">Logout</a>
        </div>
      </div>
    </div>
  </div>
  <!-- Bootstrap core JavaScript-->
  <script src="{% static 'kaan/analysis_Static/vendor/jquery/jquery.min.js' %}"></script>
  <script src="{% static 'kaan/analysis_Static/vendor/bootstrap/js/bootstrap.bundle.min.js' %}"></script>

  <!-- Core plugin JavaScript-->
  <script src="{% static 'kaan/analysis_Static/vendor/jquery-easing/jquery.easing.min.js' %}"></script>

  <!-- Page level plugin JavaScript-->
  <script src="{% static 'kaan/analysis_Static/vendor/chart.js/Chart.min.js' %}"></script>
  <script src="{% static 'kaan/analysis_Static/vendor/datatables/jquery.dataTables.js' %}"></script>
  <script src="{% static 'kaan/analysis_Static/vendor/datatables/dataTables.bootstrap4.js' %}"></script>

  <!-- Custom scripts for all pages-->
  <script src="{% static 'kaan/analysis_Static/js/sb-admin.min.js' %}"></script>

  <!-- Demo scripts for this page-->
  <script src="{% static 'kaan/analysis_Static/js/demo/datatables-demo.js' %}"></script>
  <script src="{% static 'kaan/analysis_Static/js/demo/chart-area-demo.js' %}"></script>

</body>

</html>
